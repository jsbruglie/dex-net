#
# Custom database tools
#

# Path to database hdf5
db_path: ws_kit.db.hdf5
#db_path: ws_random_coll.db.hdf5
# Dataset name
ds_name: kit
#ds_name: random_objects
# Object directory
obj_path: /home/borrego/dataset
# Gripper name
gripper: baxter
# Input stable poses directory
in_stable_poses_dir: ../kit/rest
#in_stable_poses_dir: ../random/rest
# Output grasp directory
out_grasps_dir: ../kit/grasps
#out_grasps_dir: ../random/grasps
# Output metrics directory
out_metrics_dir: ../kit/baseline

# Grasping params (relative paths for gripper_dir and cache_dir are resolved relative to dex-net root)

# Add object params
gripper_dir: 'data/grippers'
# Number of grasps to compute metrics for before logging a line
metric_display_rate: 1.0
# Gravity acceleration
gravity_accel: 9.8

# Object dataset generation

# Directory for temporary meshes
#cache_dir: '/home/borrego/Workspace/.cache'
# Use default object mass
use_default_mass: True
# Default object mass
default_mass: 1.0
# Object density
obj_density: 1.0
# Object scale
obj_scale: 1.0
# Use uniform centre of mass
use_uniform_com: True
# Rescale objects
rescale_objects: True
# Target scale
obj_target_scale: 0.050
# Scaling mode
obj_scaling_mode: 'min'

# SDF generation

# Path to SDFGen binary
#path_to_sdfgen: '/home/borrego/Workspace/dex-net/deps/SDFGen/bin/SDFGen'
# Dimensions of signed distance field grid
sdf_dim: 100
# Sdf grid boundary padding
sdf_padding: 5
# Minimum probability for stored stable poses
stp_min_prob: -0.01


# Visualization params
#show_gripper: True
show_gripper: True
max_plot_gripper: 100
min_metric: -0.01
table_extent: 0.15
animate: False
quality_scale: 1.0

# Object export params
export_format: 'obj'
export_overwrite: True

# Grasp Sampling

# Type of grasp sampler {uniform, gaussian, antipodal}
grasp_sampler: 'antipodal'
# Target number of grasps per object
target_num_grasps: 200
# Number of rotations in angle expansion step (unused)
num_grasp_rots: 32
# Sampling friction coefficient
sampling_friction_coef: 0.5
# Number of faces in pyramid approximation of friction cone
num_cone_faces: 8
# Max number of grasp sampling iterations
max_grasp_sampling_iters: 5
# Grasp samples per surface point - antipodal
grasp_samples_per_surface_point: 4
# Maximum number of surface points - antipodal
max_num_surface_points: 100
# Minimum contacts distance
min_contact_dist: 0.0025


dir_prior: 1.0

# Metric params

# Metric to compute
metric: robust_force_closure

quality_scale: 0.3

metrics:
  force_closure:
    quality_method: 'force_closure'
    friction_coef: 0.5
    num_cone_faces: 8
    soft_fingers: 1
    quality_type: 'quasi_static'
    all_contacts_required: 1
    check_approach: False

    # optional deterministic parameters
    torque_scaling: 0.01
    wrench_norm_thresh: 0.001
    wrench_regularizer: 0.0000000001

  ferrari_canny:
    quality_method: ferrari_canny_L1
    friction_coef: 0.5
    num_cone_faces: 8
    soft_fingers: 1
    quality_type: quasi_static    
    check_approach: False
    all_contacts_required: 1    
    # optional deterministic parameters
    torque_scaling: 100.0
    wrench_norm_thresh: 0.001
    wrench_regularizer: 0.0000000001

  robust_force_closure:
    # required parameters
    quality_method: force_closure
    friction_coef: 0.5
    num_cone_faces: 8
    soft_fingers: 1
    quality_type: robust_quasi_static
    check_approach: False
    all_contacts_required: 1    
    
    # optional deterministic parameters
    torque_scaling: 0.01
    wrench_norm_thresh: 0.001
    wrench_regularizer: 0.0000000001
    
    # PARAMS for robust grasp metrics
    # uncertainty
    grasp_uncertainty:
      sigma_grasp_trans_x: 0.005
      sigma_grasp_trans_y: 0.005
      sigma_grasp_trans_z: 0.005
      sigma_grasp_rot_x: 0.001
      sigma_grasp_rot_y: 0.001
      sigma_grasp_rot_z: 0.001
      num_prealloc_samples: 0
    obj_uncertainty:
      sigma_obj_trans_x: 0.01
      sigma_obj_trans_y: 0.01
      sigma_obj_trans_z: 0.01
      sigma_obj_rot_x: 0.01
      sigma_obj_rot_y: 0.01
      sigma_obj_rot_z: 0.01
      sigma_obj_scale: 0.00
      num_prealloc_samples: 10
    params_uncertainty:
      sigma_friction_coef: 0.1
      num_prealloc_samples: 0
    # sampling params
    num_quality_samples: 25
    sampling_snapshot_rate: 10
